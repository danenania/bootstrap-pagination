
(function(){this.BootstrapPagination=(function(){function BootstrapPagination(selector,options){this.options=options!=null?options:{};this.el=$(selector).html("<div class='pagination'>\n  <ul>\n    <li>\n      <a class='prev' href='#'>« Prev</a>\n    </li>\n    <li>\n      <a class='next' href='#'>Next »</a>\n    </li>\n  </ul>\n</div>\n<div class='pagination numeric'><ul/></div>");this.numPages=this.options.numPages;this.currentPage=this.options.currentPage;this.nextBtn=this.el.find('li a.next');this.prevBtn=this.el.find('li a.prev');this.pageNums=new BootstrapPageNums(this.el.find('.pagination.numeric ul'));this.initListeners();this.render(this.numPages,this.currentPage);}
BootstrapPagination.prototype.initListeners=function(){var _this=this;$(this.pageNums).bind("pageSelect",function(e,num){if(num!==_this.currentPage){_this.render(_this.numPages,num);return _this._pageSelect(num);}});this.nextBtn.click(function(e){e.preventDefault();if((_this.numPages!=null)&&(_this.currentPage!=null)&&_this.currentPage<_this.numPages-1){_this.render(_this.numPages,_this.currentPage+1);return _this._pageSelect(_this.currentPage);}});return this.prevBtn.click(function(e){e.preventDefault();if((_this.numPages!=null)&&(_this.currentPage!=null)&&_this.currentPage>0){_this.render(_this.numPages,_this.currentPage-1);return _this._pageSelect(_this.currentPage);}});};BootstrapPagination.prototype.render=function(numPages,currentPage){this.numPages=numPages;this.currentPage=currentPage;this.el.toggle((this.numPages!=null)&&(this.currentPage!=null)&&this.numPages>1);return this.pageNums.render(this.numPages,this.currentPage,this.options.numBlocks);};BootstrapPagination.prototype._pageSelect=function(num){var _base;return typeof(_base=this.options).onSelect==="function"?_base.onSelect(num):void 0;};return BootstrapPagination;})();this.BootstrapPageNums=(function(){function BootstrapPageNums(selector,options){this.options=options!=null?options:{};this.el=$(selector);}
BootstrapPageNums.prototype.render=function(numPages,currentPage,numBlocks){var ellipsisAnterior,ellipsisPosterior,i,lastBlock,middleBlock,middlePage,page,wasEllipsisAnterior,_i,_results;if(numBlocks==null){numBlocks=7;}
this.el.empty();middleBlock=Math.round((numBlocks-1)/2);middlePage=Math.round(numPages/2);lastBlock=Math.min(numPages,numBlocks);wasEllipsisAnterior=false;_results=[];for(i=_i=0;0<=lastBlock?_i<lastBlock:_i>lastBlock;i=0<=lastBlock?++_i:--_i){if(i>numPages-1){break;}
ellipsisAnterior=i===1&&(numPages-numBlocks)>=1&&currentPage>(numBlocks-(middleBlock+1));ellipsisPosterior=i===numBlocks-2&&(numPages-numBlocks)>0&&currentPage<(numPages-(middleBlock+(numBlocks%2)));if(ellipsisAnterior){wasEllipsisAnterior=true;}
page=i===0?0:i===lastBlock-1?numPages-1:wasEllipsisAnterior?currentPage>=(numPages-middleBlock)?i===numBlocks-1?numPages-1:(numPages-1)-((numBlocks-1)-i):i===middleBlock?currentPage:i<middleBlock?currentPage-(middleBlock-i):i>middleBlock?currentPage+(i-middleBlock):void 0:i===currentPage?i:i>currentPage?currentPage+(i-currentPage):i<currentPage?currentPage-(currentPage-i):void 0;_results.push(this.addBlock(page,page===currentPage,ellipsisAnterior||ellipsisPosterior));}
return _results;};BootstrapPageNums.prototype.addBlock=function(page,current,ellipsis){var block;if(current==null){current=false;}
if(ellipsis==null){ellipsis=false;}
block=$("<li "+(current?"class='active'":"")+"><a href='#' data-page='"+page+"'>"+(ellipsis?'...':page+1)+"</a></li>");this.addListeners(block);return this.el.append(block);};BootstrapPageNums.prototype.addListeners=function(block){var _this=this;return block.click(function(e){$(_this).trigger('pageSelect',parseInt($(e.target).data('page')));return false;});};return BootstrapPageNums;})();}).call(this);